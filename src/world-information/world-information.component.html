<div class="world-info-container">
    <button mat-flat-button (click)="toggleWorldInfo()" class="toggle-button">
        <mat-icon>{{showWorldInfo ? 'expand_less' : 'public'}}</mat-icon>
        {{showWorldInfo ? 'Hide' : 'View'}} Our World
    </button>
    
    @if (showWorldInfo) {
        <div class="drawer-backdrop" (click)="toggleWorldInfo()"></div>
        <div class="world-info-drawer" [class.open]="showWorldInfo && gameSessionDisplay">
            @if (gameSessionDisplay) {
                <mat-card>
                    <mat-card-header>
                        <mat-card-title>Our World</mat-card-title>
                    </mat-card-header><br>
                    <mat-card-content>
                        @if (phaseInfo?.showGameBoard) {
                            <div class="game-board-section">
                                <app-game-board [gameCode]="gameCode"></app-game-board>
                            </div>
                        }
                        <div class="info-content">

                            @if (!gameSessionDisplay.mapDescription 
                            && !gameSessionDisplay.playerDescription 
                            && !gameSessionDisplay.entity 
                            && !gameSessionDisplay.goalDescription 
                            && !gameSessionDisplay.endingDescription) {
                                <div class="info-item">
                                    <p>We have not yet defined this place.</p>
                                </div>
                            }

                            @if (gameSessionDisplay.mapDescription) {
                                <div class="info-item">
                                    <strong>Where are we?</strong>
                                    <p>{{gameSessionDisplay.mapDescription || 'Not yet defined'}}</p>
                                </div>
                            }
                            
                            @if (gameSessionDisplay.playerDescription) {
                                <div class="info-item">
                                    <strong>Who are we?</strong>
                                    <p>{{gameSessionDisplay.playerDescription || 'Not yet defined'}}</p>
                                </div>
                            }

                            @if (gameSessionDisplay.entity) {
                                <div class="info-item">
                                    <strong>What do we fear?</strong>
                                    <p>{{gameSessionDisplay.entity || 'Not yet defined'}}</p>
                                </div>
                            }

                            @if (gameSessionDisplay.goalDescription) {
                                <div class="info-item">
                                    <strong>What is coming?</strong>
                                    <p>{{gameSessionDisplay.goalDescription || 'Not yet defined'}}</p>
                                </div>
                            }
                        </div>
                    </mat-card-content>
                </mat-card>
            } @else {
                <mat-card>
                    <mat-card-content>
                        <p>Loading world information...</p>
                    </mat-card-content>
                </mat-card>
            }
        </div>
    }
</div>

