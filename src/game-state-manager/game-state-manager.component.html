@if (isGameInitialized()) {
    <p>Hello {{player.userName}}!</p>

    @if(adventureMap) {
        <p>Welcome to {{adventureMap.name}}!</p>
    } @else {
        <p>Placeholder for genre vote</p>
        <!-- <genre [gameCode]="gameCode" [gameState]="gameState" [player]="player" (playerDone)="setDone($event)"></genre> -->
    }

    @if(player.firstPlayer) {
        <p>If all players have joined, click below!</p>
        <button mat-flat-button (click)="nextGamePhase()">Start game?</button>
    }
}

@if (isGameInPreamblePhase() || isGameInCollaborativeTextWinningPhase()) {
    <p>Have someone read the text on screen!</p>
    @if(player.firstPlayer) {
        <p>Push the button below to continue</p>
        <button mat-flat-button (click)="nextGamePhase()">Continue</button>
    }
}

@if (isGameInWritePromptsPhase()) {
    <write-prompt [gameCode]="gameCode" [gameState]="gameState" [player]="player" (playerDone)="setDone($event)"></write-prompt>
}

@if (isGameInCollaborativeTextPhase()) {
    <collaborative-text 
      [gameCode]="gameCode" 
      [gameState]="gameState" 
      [player]="player" 
      [collaborativeTextPhases]="collaborativeTextPhases"
      (collaborativeTextPhaseChanged)="onCollaborativeTextPhaseChanged($event)">
    </collaborative-text>
}

@if (isGameInVotingPhase()) {
    <app-voting 
      [gameCode]="gameCode" 
      [gameState]="gameState" 
      [player]="player"
      (playerDone)="setDone($event)">
    </app-voting>
}

@if (isLocationSelect()) {
    <location [gameCode]="gameCode" [gameState]="gameState" [player]="player" [storiesToPlayPerRound]="storiesToPlayPerRound" (playerDone)="setDone($event)"></location>
}

@if (isGameInWriteOutcomesPhase()) {
    <write-outcomes [gameCode]="gameCode" [gameState]="gameState" [player]="player" (playerDone)="setDone($event)"></write-outcomes>
}

@if (isGameInAdventurePhase()) {
    <adventure [gameCode]="gameCode" [gameState]="gameState" [player]="player" [activePlayerSession]="activePlayerSession" (playerDone)="setDone($event)"></adventure>
}

@if (isGameInRitualPhase()) {
    <ritual [gameCode]="gameCode" [gameState]="gameState" [player]="player" [activePlayerSession]="activePlayerSession" (playerDone)="setDone($event)"></ritual>
}

@if (isGameInWriteEndingsPhase()) {
    <write-endings [gameCode]="gameCode" [gameState]="gameState" [player]="player" (playerDone)="setDone($event)"></write-endings>
}

@if (isGameInEndingPhase()) {
    <ending [gameCode]="gameCode" [gameState]="gameState" [player]="player" [activePlayerSession]="activePlayerSession" (playerDone)="setDone($event)"></ending>
}